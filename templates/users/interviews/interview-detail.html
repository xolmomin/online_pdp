{% extends 'users/base.html' %}

{% block title %}
    Interview Preparation - EduHub Learning Platform
{% endblock %}

{% block custom_css %}
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

    </style>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">

    {#  CSS (kod style + copy button)#}
    <style>
        pre {
            position: relative;
            margin: 1.5rem 0;
            background: #1e1e1e;
            border-radius: 0.75rem;
            overflow: auto;
        }

        pre code {
            font-family: 'Cascadia Code', 'Fira Code', 'Consolas', monospace;
            font-size: 0.9rem;
            padding: 1rem;
            display: block;
        }

        /* Copy button style */
        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #4f46e5; /* indigo */
            color: white;
            border: none;
            padding: 4px 10px;
            font-size: 0.75rem;
            border-radius: 0.375rem;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .copy-btn:hover {
            opacity: 1;
        }
    </style>
{% endblock %}

{% block content %}
    <!-- Page Header -->
    <section class="hero-gradient text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h2 class="text-4xl font-bold mb-4">Interview Preparation Hub</h2>
                <p class="text-xl mb-8 max-w-3xl mx-auto opacity-90">
                    Master your next interview with our comprehensive collection of practice questions organized by
                    category
                    and difficulty level.
                </p>
            </div>
        </div>
    </section>

    <!-- Interview Categories -->
    <section class="py-12">
        <div class="max-w-4xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">{{ interview.title }}</h2>
            <div class="prose max-w-none mb-8">
                {{ interview.description|safe }}
            </div>

            <h3 class="text-xl font-semibold mb-4">Questions & Answers</h3>
            <div class="space-y-6">
                {% for part in interview.parts.all %}
                    <div class="p-6 border rounded-lg shadow-sm bg-white space-y-4">
                        <h3 class="text-sm font-semibold text-blue-600 uppercase tracking-wide flex items-center gap-2">
                            Question
                        </h3>
                        <h4 class="font-medium text-gray-800 mb-4 prose max-w-none">
                            {{ part.question|safe }}
                        </h4>

                        <h3 class="text-sm font-semibold text-green-600 uppercase tracking-wide flex items-center gap-2">
                            Answer
                        </h3>
                        <p class="text-gray-700 prose max-w-none">
                            {{ part.answer|safe }}
                        </p>
                    </div>

                {% empty %}
                    <p class="text-gray-500">No questions yet.</p>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}


{% block custom_js %}
    <script>
        // Category selection functionality
        function openCategory(category) {
            const categoryNames = {
                'technical': 'Technical Interviews',
                'behavioral': 'Behavioral Interviews',
                'case-study': 'Case Study Interviews',
                'product': 'Product Management',
                'data-science': 'Data Science',
                'leadership': 'Leadership & Management'
            };

            alert(`Opening ${categoryNames[category]} section...\n\nThis would navigate to a dedicated page with filtered questions for this category.`);
        }
    </script>
    {#  JavaScript (highlight + copy function)  #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Highlight.js init
            document.querySelectorAll("pre code").forEach(el => {
                hljs.highlightElement(el);

                // Add copy button
                const button = document.createElement("button");
                button.innerText = "Copy";
                button.className = "copy-btn";
                el.parentNode.appendChild(button);

                button.addEventListener("click", () => {
                    navigator.clipboard.writeText(el.innerText).then(() => {
                        button.innerText = "Copied!";
                        setTimeout(() => (button.innerText = "Copy"), 2000);
                    });
                });
            });
        });
    </script>
{% endblock %}
